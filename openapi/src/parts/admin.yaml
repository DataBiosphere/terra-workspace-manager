## admin
paths:
  /api/admin/v1/workspaces/cloudcontexts/syncIamRoles:
    patch:
      parameters:
      - $ref: '#/components/parameters/WetRun'
      summary: Sync custom IAM roles for all GCP workspaces.
      operationId: syncIamRoles
      tags: [Admin]
      responses:
        '200':
          $ref: '#/components/responses/SyncIamRolesResultResponse'
        '202':
          $ref: '#/components/responses/SyncIamRolesResultResponse'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '500':
          $ref: '#/components/responses/ServerError'
components:
  schemas:
    SyncIamRolesResult:
      type: object
      description: |
        The result of a call to sync IAM roles of all the existing workspace's
        GCP projects.
      properties:
        jobReport:
          $ref: '#/components/schemas/JobReport'
        errorReport:
          $ref: '#/components/schemas/ErrorReport'

  parameters:
    WetRun:
      name: wetRun
      in: query
      description: Whether this is a wet run.
      required: false
      schema:
        type: boolean

  responses:
    SyncIamRolesResultResponse:
      description: Job is completed (succeeded or failed)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SyncIamRolesResult'
